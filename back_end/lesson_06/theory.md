# Lesson 06


## HTTP - Протокол Передачи Гипертекста

### Введение в Протокол Передачи Данных
Протокол передачи данных - это универсальное соглашение, позволяющее разработчикам различных сервисов обмениваться информацией в стандартизированном формате.

Разработчикам серверных приложений это особенно удобно, поскольку существует множество библиотек, способных автоматически преобразовывать и отправлять информацию согласно выбранному протоколу.

### Структура HTTP
HTTP является текстовым протоколом, включающим три основные части:

1. **Стартовая строка**: содержит служебные данные.
2. **Заголовки**: описывают параметры сообщения.
3. **Тело сообщения**: непосредственно данные. Отделено от заголовков пустой строкой.

#### Взаимодействие с сервером
С помощью HTTP можно отправлять запросы на сервер (`request`) и получать от него ответы (`response`). Запросы и ответы имеют различные параметры.

**В стартовой строке запроса указывается:**
- `GET` - метод запроса.
- `/` - путь запроса.
- `HTTP/1.1` - версия протокола.

**Заголовки запроса могут включать:**
- `Host` - хост, к которому направлен запрос.
- `User-Agent` - клиент, отправляющий запрос.

**Тело сообщения** в запросе GET отсутствует.

#### HTTP-методы
HTTP-запрос обязательно содержит метод, их всего девять: `GET`, `POST`, `PUT`, `OPTIONS`, `HEAD`, `PATCH`, `DELETE`, `TRACE`, `CONNECT`. Наиболее распространены `GET` и `POST`.

- `GET`: запрашивает данные с сервера. Тело отсутствует, но могут быть параметры в URL.
- `POST`: публикует данные на сервере.

Пример запроса POST:
```http
POST /images/add/json HTTP/1.1
Accept: application/json
Content-Type: application/json
Content-Length: 32
Host: mysite.com

{
    "Id" : 123,
    "Image" : "Pic1.jpeg"
}
```

### HTTP-ответы
После обработки запроса сервер отправляет ответ, который также состоит из стартовой строки, заголовков и тела (при наличии).

#### Коды состояния HTTP-ответов
- `1xx`: Информационный - запрос получен, продолжение следует.
- `2xx`: Успешный - запрос корректно получен и обработан.
- `3xx`: Перенаправление - требуются дополнительные действия для завершения запроса.
- `4xx`: Ошибка клиента - запрос содержит ошибки.
- `5xx`: Ошибка сервера - сервер не смог обработать корректный запрос.

Примеры кодов состояния:
- `200 OK` - успешный запрос.
- `201 Created` - создан новый ресурс.
- `301 Moved Permanently` - ресурс перемещен навсегда.
- `404 Not Found` - ресурс не найден.
- `500 Internal Server Error` - внутренняя ошибка сервера.

### HTTPS - Безопасная версия HTTP
HTTPS - это расширение HTTP с добавлением шифрования, использующее тот же синтаксис (стартовые строки, заголовки), но добавляет шифрование между прикладным и транспортным уровнями (обычно TLS). В HTTPS шифруется вся передаваемая информация, кроме хоста и порта.

---

**Что такое REST**

REST — это акроним, сокращение от английского Representational State Transfer — передача состояния представления. Это архитектурный стиль взаимодействия компонентов распределенной системы в компьютерной сети. Проще говоря, REST определяет стиль взаимодействия (обмена данными) между разными компонентами системы, каждая из которых может физически располагаться в разных местах. Данный архитектурный стиль представляет собой согласованный набор ограничений, учитываемых при проектировании распределенной системы. Эти ограничения иногда называют принципами REST.

**REST ограничения и принципы**

REST определяет, как компоненты распределенной системы должны взаимодействовать друг с другом. В общем случае это происходит посредством запросов-ответов. Компоненту, которая отправляет запрос, называют клиентом; компоненту, которая обрабатывает запрос и отправляет клиенту ответ, называют сервером. Запросы и ответы, чаще всего, отправляются по протоколу HTTP (англ. HyperText Transfer Protocol — "протокол передачи гипертекста").

Как правило, сервер — это некое веб-приложение. Клиентом же может быть не то чтобы что угодно, но довольно многое. Например, мобильное приложение, которое запрашивает у сервера данные. Либо браузер, который отправляет запросы с веб-страницы на сервер для загрузки данных.

1. **Приведение архитектуры к модели клиент-сервер**
    - В основе данного ограничения лежит разграничение потребностей. Необходимо отделять потребности клиентского интерфейса от потребностей сервера, хранящего данные. Данное ограничение повышает переносимость клиентского кода на другие платформы, а упрощение серверной части улучшает масштабируемость системы. Само разграничение на “клиент” и “сервер” позволяет им развиваться независимо друг от друга.

2. **Отсутствие состояния**
    - Архитектура REST требует соблюдения следующего условия. В период между запросами серверу не нужно хранить информацию о состоянии клиента и наоборот. Все запросы от клиента должны быть составлены так, чтобы сервер получил всю необходимую информацию для выполнения запроса. Таким образом и сервер, и клиент могут "понимать" любое принятое сообщение, не опираясь при этом на предыдущие сообщения.

3. **Кэширование**
    - Клиенты могут выполнять кэширование ответов сервера. У тех, в свою очередь, должно быть явное или неявное обозначение как кэшируемых или некэшируемых, чтобы клиенты в ответ на последующие запросы не получали устаревшие или неверные данные.

4. **Единообразие интерфейса**
    - К фундаментальным требованиям REST архитектуры относится и унифицированный, единообразный интерфейс. Клиент должен всегда понимать, в каком формате и на какие адреса ему нужно слать запрос, а сервер, в свою очередь, также должен понимать, в каком формате ему следует отвечать на запросы клиента. Этот единый формат клиент-серверного взаимодействия, который описывает, что, куда, в каком виде и как отсылать, и является унифицированным интерфейсом.

5. **Слои**
    - Под слоями подразумевается иерархическая структура сетей. Иногда клиент может общаться напрямую с сервером, а иногда — просто с промежуточным узлом. Применение промежуточных серверов способно повысить масштабируемость за счёт балансировки нагрузки и распределённого кэширования.

**Преимущества, которые дает REST**

- Надёжность (не нужно сохранять информацию о состоянии клиента, которая может быть утеряна).
- Производительность (за счёт использования кэша).
- Масштабируемость.

**Запросы и ресурсы в REST**

- Клиентские запросы практически всегда сделаны по протоколу HTTP.
- Данные, которые получают или изменяют клиенты посредством запросов, называют ресурсами.
- Эндпоинт — это URI: последовательность символов, идентифицирующая абстрактный или физический ресурс.

**HTTP методы и тело запроса**

- Метод HTTP указывает на основную операцию над ресурсом.
- В запросах и ответах присутствуют HTTP заголовки, представляющие собой пары ключ-значение.
- Тело запроса пересылаемое клиентом сообщение на сервер, его наличие зависит от типа HTTP запроса.

**URI и Ресурсы**

- Ресурсы в REST — это все, чему можно дать имя, например, пользователь, документ, отчет, заказ.
- URI в REST принято начинать с множественной формы существительного, описывающего некоторый ресурс.

**HTTP метод**

- Определяет основную операцию над ресурсом, например, GET для получения данных, POST для создания, PUT для изменения, и DELETE для удаления.

**Тело запроса**

- Зависит от типа HTTP запроса и может содержать информацию для создания или модификации ресурса, чаще всего в форматах XML или JSON.

---

Этот формат делает текст более читабельным и позволяет легче навигировать по ключевым моментам.

